(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(36),r=n.n(s),i=(n(43),n(44),n(45),n(5)),o=(n(46),n(1));function j(e){var t=e.children;return Object(o.jsx)("div",{className:"container",children:t})}function l(){return Object(o.jsx)("section",{children:Object(o.jsxs)(j,{className:"home__header",children:[Object(o.jsx)("div",{className:"home__logo",children:"My Contacts"}),Object(o.jsxs)("div",{className:"home__links",children:[Object(o.jsx)(i.b,{to:"/signup",children:"sign up"}),Object(o.jsx)(i.b,{to:"/login",children:"log in"})]})]})})}var u=n(4),b=(n(52),n(24));n(53);b.a.initializeApp({apiKey:"AIzaSyC30CcXGzXdhPMhQr4IYVbNIXn845_5ni0",authDomain:"contacts-d9f0b.firebaseapp.com",projectId:"contacts-d9f0b",storageBucket:"contacts-d9f0b.appspot.com",messagingSenderId:"100063188752",appId:"1:100063188752:web:192444baab87cd95aa3795"});var d=b.a.auth(),h=n(7),O=n(18),x=n.n(O);function f(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(u.a)(s,2),l=r[0],b=r[1],O=Object(c.useState)(!1),f=Object(u.a)(O,2),m=f[0],p=f[1],g=Object(c.useState)(""),v=Object(u.a)(g,2),_=v[0],S=v[1],C=Object(h.f)();return Object(o.jsx)("div",{children:_&&m?Object(o.jsxs)("p",{children:[_," Please refresh the page."]}):m?Object(o.jsx)(x.a,{type:"Oval",color:"#191970",height:80,width:80}):Object(o.jsxs)("div",{className:"login__container",children:[Object(o.jsxs)(j,{children:[Object(o.jsx)(i.b,{to:"/home",children:"home"}),Object(o.jsx)(i.b,{to:"/signup",children:"sign up"})]}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(!0),d.signInWithEmailAndPassword(n,l).then((function(e){e&&C.push("/")})).catch((function(){S("Failed to log in!")})),sessionStorage.setItem("user",JSON.stringify(n))},className:"login__form",children:[Object(o.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"email",placeholder:"Enter email",required:!0}),Object(o.jsx)("input",{onChange:function(e){return b(e.target.value)},type:"password",placeholder:"Enter password",required:!0}),Object(o.jsx)("button",{children:"Submit"})]})]})})}n(73);var m=Object(c.createContext)();function p(e){var t=e.children,n=Object(c.useState)([]),a=Object(u.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(""),j=Object(u.a)(i,2),l=j[0],b=j[1],d=Object(c.useState)(""),h=Object(u.a)(d,2),O=h[0],x=h[1],f=Object(c.useState)(),p=Object(u.a)(f,2),g=p[0],v=p[1],_=Object(c.useState)(),S=Object(u.a)(_,2),C=S[0],N=S[1],y=Object(c.useState)(""),P=Object(u.a)(y,2),E=P[0],k=P[1],w=Object(c.useState)(""),I=Object(u.a)(w,2),M=I[0],z=I[1],q=Object(c.useState)(1),D=Object(u.a)(q,2),J=D[0],U=D[1],A=Object(c.useState)("10"),L=Object(u.a)(A,2),$={contacts:s,setContacts:r,name:l,setName:b,surname:O,setSurname:x,mobile:g,setMobile:v,phone:C,setPhone:N,email:E,setEmail:k,username:M,setUsername:z,currentPage:J,setCurrentPage:U,contactsPerPage:L[0],setContactsPerPage:L[1]};return Object(o.jsx)(m.Provider,{value:$,children:t})}var g=n(11),v=n.n(g),_=v.a.create({baseURL:"https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/"});function S(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(u.a)(s,2),l=r[0],b=r[1],O=Object(c.useState)(""),f=Object(u.a)(O,2),p=f[0],g=f[1],v=Object(c.useState)(!1),S=Object(u.a)(v,2),C=S[0],N=S[1],y=Object(h.f)(),P=Object(c.useContext)(m),E=P.username,k=P.setUsername;return Object(o.jsx)("div",{children:p&&C?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{children:p}),Object(o.jsx)("p",{children:"Please refresh the page."})]}):C?Object(o.jsx)(x.a,{type:"Oval",color:"#191970",height:80,width:80}):Object(o.jsxs)("div",{className:"signup__container",children:[Object(o.jsxs)(j,{children:[Object(o.jsx)(i.b,{to:"/home",children:"home"}),Object(o.jsx)(i.b,{to:"/login",children:"log in"})]}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();if(N(!0),!l.match(/^(?=.*[0-9])(?=.*[a-z])(?=.*[$#!+-]).{6,}$/))return g("Password should contain: at least 6 characters, 1 number and 1 special character: +, -, !, #, $.");d.createUserWithEmailAndPassword(n,l).then((function(e){e&&!C&&y.push("/")})).catch((function(e){return g(e.message)})),sessionStorage.setItem("user",JSON.stringify(n));var t={email:n,username:E};_.post("users.json/",t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},className:"signup__form",children:[Object(o.jsx)("input",{onChange:function(e){return k(e.target.value)},type:"text",placeholder:"Enter username"}),Object(o.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"email",placeholder:"Enter email",required:!0}),Object(o.jsx)("input",{onChange:function(e){return b(e.target.value)},type:"password",placeholder:"Enter password",required:!0}),Object(o.jsx)("button",{children:"Submit"})]})]})})}n(92);var C=n(15),N=function(e){var t=e.data,n=[];for(var c in t)n.push(Object(C.a)(Object(C.a)({},t[c]),{},{id:c}));return n},y=function(e){sessionStorage.setItem("id",JSON.stringify(e))};n(93),n(94);function P(){var e=Object(c.useContext)(m),t=e.setMobile,n=e.setPhone,a=e.setEmail;return Object(o.jsxs)("div",{className:"subform__contacts",children:[Object(o.jsxs)("div",{className:"subform__mobile",children:[Object(o.jsx)("label",{children:"Mobile format: 09x xxx(x) xxx"}),Object(o.jsx)("input",{onChange:function(e){return t(e.target.value)},type:"tel",placeholder:"Enter mobile",maxLength:"12",required:!0})]}),Object(o.jsxs)("div",{className:"subform__phone",children:[Object(o.jsx)("label",{children:"Phone format: 0x(x) xxx(x) xxx"}),Object(o.jsx)("input",{onChange:function(e){return n(e.target.value)},type:"tel",placeholder:"Enter phone",maxLength:"12",required:!0})]}),Object(o.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"email",placeholder:"Enter email",required:!0})]})}function E(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(u.a)(s,2),i=r[0],j=r[1],l=Object(c.useState)(!1),b=Object(u.a)(l,2),d=b[0],h=b[1],O=Object(c.useRef)(),x=Object(c.useContext)(m),f=x.name,p=x.setName,g=x.surname,v=x.setSurname,S=x.mobile,C=x.phone,N=x.email,y=x.favorite,E=S&&S.match(/^[0][9][1-9]\s\d{3,4}\s\d{3}$/),k=C&&C.match(/^[0][1]\s\d{3,4}\s\d{3}|[0][2-5][0-9]\s\d{3,4}\s\d{3}$/),w=function(e){return e.split("-").reverse().join("/")};return Object(o.jsxs)("div",{className:"form__container",children:[d?Object(o.jsx)("p",{children:"Contact is saved!"}):"",S&&!E?Object(o.jsx)("p",{children:"Mobile format is invalid!"}):"",C&&!k?Object(o.jsx)("p",{children:"Phone format is invalid!"}):"",Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:f,surname:g,email:N,mobile:S,phone:C,birthDate:w(n),favorite:y};_.post("contacts.json/",t).then((function(e){console.log(e),h(!0),setTimeout((function(){h(!1)}),1500)})).catch((function(e){return console.log(e)})),O.current.reset()},ref:O,className:"form__info",children:[Object(o.jsx)("input",{onChange:function(e){return p(e.target.value)},type:"text",placeholder:"Enter name",maxLength:"100",required:!0}),Object(o.jsx)("input",{onChange:function(e){return v(e.target.value)},type:"text",placeholder:"Enter surname",maxLength:"300",required:!0}),Object(o.jsxs)("div",{className:"form__date",children:[Object(o.jsx)("label",{children:"Select birthdate"}),Object(o.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"date"})]}),Object(o.jsx)("button",{onClick:function(){return j(!i)},children:"Enter contacts"}),i&&Object(o.jsx)(P,{}),Object(o.jsx)("button",{disabled:!E||!k,children:"Add your contact"})]})]})}function k(){var e=Object(c.useContext)(m),t=e.username,n=e.setUsername,a=JSON.parse(sessionStorage.getItem("user")),s=Object(h.f)();return Object(c.useEffect)((function(){return v.a.get("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/users.json").then((function(e){var t=N(e).filter((function(e){return e.email===a}));n(t[0].username)})).catch((function(e){return console.log(e)}))}),[n,a]),Object(o.jsxs)("section",{className:"dashboard__container",children:[Object(o.jsxs)(j,{children:[Object(o.jsxs)("p",{children:["Welcome ",t,"!"]}),Object(o.jsx)(i.b,{to:"/contacts",className:"dashboard__link-contacts",children:"contacts"}),Object(o.jsx)("button",{onClick:function(){return d.signOut().then((function(){return s.push("/home")}))},className:"dashboard__btn-logout",children:"log out"})]}),Object(o.jsx)(E,{})]})}n(95);var w=n(26),I=(n(96),n(25));function M(){for(var e=Object(c.useContext)(m),t=e.contacts,n=e.currentPage,a=e.setCurrentPage,s=e.contactsPerPage,r=e.setContactsPerPage,j=[],l=Math.ceil(t.length/s),u=1;u<=l;u++)j.push(u);return Object(o.jsxs)("div",{className:"pagination__container",children:[Object(o.jsxs)("div",{className:"pagination",children:[Object(o.jsx)(I.b,{onClick:function(){a(n-1),n<=1&&a(1)},className:"pagination__control"}),j.map((function(e,t){return Object(o.jsx)("li",{className:"pagination__num",children:Object(o.jsx)(i.b,{to:"/contacts",onClick:function(){return function(e){return a(e)}(e)},children:e})},t)})),Object(o.jsx)(I.a,{onClick:function(){a(n+1),n>=l&&a(l)},className:"pagination__control"})]}),Object(o.jsxs)("div",{className:"pagination__sort",children:[Object(o.jsx)("p",{children:"sort by:"}),Object(o.jsxs)("select",{value:s,onChange:function(e){return r(e.target.value)},children:[Object(o.jsx)("option",{value:"5",children:"5"}),Object(o.jsx)("option",{value:"10",children:"10"}),Object(o.jsx)("option",{value:"15",children:"15"})]})]})]})}function z(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(u.a)(s,2),l=r[0],b=r[1],d=Object(c.useState)([]),h=Object(u.a)(d,2),O=h[0],f=h[1],p=Object(c.useState)("a-z"),g=Object(u.a)(p,2),S=g[0],P=g[1],E=Object(c.useContext)(m),k=E.contacts,I=E.setContacts,z=E.currentPage,q=E.contactsPerPage,D=z*q,J=D-q,U=k.slice(J,D);Object(c.useEffect)((function(){return a(!0),v.a.get("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/contacts.json").then((function(e){var t=N(e).sort((function(e,t){return e.surname>t.surname?1:-1}));I(t),a(!1)})).catch((function(e){b(e),a(!1)}))}),[I]);var A=function(e){var t=k.filter((function(t){return t.id===e})),n=!t[0].favorite,c=k.map((function(t){return t.id===e?Object(C.a)(Object(C.a)({},t),{},{favorite:n}):t}));I(c),y(e);var a=JSON.parse(sessionStorage.getItem("id")),s=Object(C.a)(Object(C.a)({},t[0]),{},{favorite:n});_.patch("contacts/".concat(a,".json"),s).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))};return Object(o.jsxs)("div",{className:"contacts__container",children:[Object(o.jsxs)(j,{children:[Object(o.jsx)(i.b,{to:"/",className:"contacts__link home",children:"home"}),Object(o.jsx)(i.b,{to:"/favorites",className:"contacts__link favorites",children:"favorites"}),Object(o.jsx)("input",{onChange:function(e){return f(e.target.value)},type:"search",placeholder:"Search..."}),Object(o.jsxs)("div",{className:"contacts__sort",children:[Object(o.jsx)("p",{children:"sort by:"}),Object(o.jsxs)("select",{value:S,onChange:function(e){return P(e.target.value)},children:[Object(o.jsx)("option",{value:"a-z",children:"a-z"}),Object(o.jsx)("option",{value:"z-a",children:"z-a"})]})]})]}),n?Object(o.jsx)(x.a,{type:"Oval",color:"#191970",height:80,width:80}):l?Object(o.jsx)("p",{children:l}):"",Object(o.jsx)("table",{className:"contacts__table",children:Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Name"}),Object(o.jsx)("th",{children:"Surname"}),Object(o.jsx)("th",{children:"Email"}),Object(o.jsx)("th",{children:"Star"})]}),U.filter((function(e){return O.length?Object.values(e).includes(O):e})).sort((function(e,t){return"a-z"===S?e.surname>t.surname?1:-1:e.surname<t.surname?1:-1})).map((function(e,t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.name})}),Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.surname})}),Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.email})}),Object(o.jsx)("td",{children:e.favorite?Object(o.jsx)(w.a,{onClick:function(){return A(e.id)}}):Object(o.jsx)(w.b,{onClick:function(){return A(e.id)}})})]},t)}))]})}),Object(o.jsx)(M,{})]})}n(97);function q(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useContext)(m),r=s.contacts,l=s.setContacts,b=JSON.parse(sessionStorage.getItem("id"));Object(c.useEffect)((function(){return v.a.get("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/contacts/".concat(b,".json")).then((function(e){console.log(e.data),l([e.data])})).catch((function(e){return a(e)}))}),[l,b]);return Object(o.jsxs)("div",{className:"details__container",children:[Object(o.jsxs)(j,{children:[Object(o.jsx)(i.b,{to:"/contacts",className:"details__link home",children:"contacts"}),Object(o.jsx)(i.b,{to:"/favorites",className:"details__link favorites",children:"favorites"}),Object(o.jsx)(i.b,{to:"/update",className:"details__link update",children:"update"})]}),Object(o.jsx)("button",{onClick:function(){v.a.delete("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/contacts/".concat(b,".json")).then((function(e){console.log(e),l([])}))},children:"Delete Contact"}),n?Object(o.jsx)("p",{children:n}):b&&r.map((function(e,t){return Object(o.jsx)("section",{children:Object(o.jsx)("table",{className:"details__table",children:Object(o.jsxs)("tbody",{children:[Object(o.jsx)("tr",{children:Object(o.jsx)("th",{children:"Contact Details"})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Name: ",e.name]})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Surname: ",e.surname]})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Email: ",e.email]})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Mob: ",e.mobile]})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Phone: ",e.phone]})}),Object(o.jsx)("tr",{children:Object(o.jsxs)("td",{children:["Birthdate: ",e.birthDate]})})]})})},t)}))]})}n(98);function D(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(u.a)(s,2),l=r[0],b=r[1],d=JSON.parse(sessionStorage.getItem("id")),h=Object(c.useContext)(m),O=h.contacts,x=h.setContacts,f=h.name,p=h.setName,g=h.surname,S=h.setSurname,C=h.email,N=h.setEmail,y=h.mobile,P=h.setMobile,E=h.phone,k=h.setPhone,w=(null===y||void 0===y?void 0:y.match(/^[0][9][1-9]\s\d{3,4}\s\d{3}$/))||void 0===y,I=(null===E||void 0===E?void 0:E.match(/^[0][1]\s\d{3,4}\s\d{3}|[0][2-5][0-9]\s\d{3,4}\s\d{3}$/))||void 0===E;Object(c.useEffect)((function(){return v.a.get("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/contacts/".concat(d,".json")).then((function(e){console.log(e.data),x([e.data])})).catch((function(e){return a(e)}))}),[x,d]);var M={name:f,surname:g,email:C,mobile:y,phone:E},z=function(e){e.preventDefault(),_.patch("contacts/".concat(d,".json"),function(e){var t={};for(var n in e)""!==e[n]&&void 0!==e[n]&&(t[n]=e[n]);return t}(M)).then((function(e){console.log(e),b(!0),setTimeout((function(){b(!1)}),1500)})).catch((function(e){return a(e)}))};return Object(o.jsxs)("div",{className:"update__container",children:[Object(o.jsx)(j,{children:Object(o.jsx)(i.b,{to:"/details/".concat(d),children:"details"})}),l&&Object(o.jsx)("p",{children:"Contact is updated!"}),n&&Object(o.jsx)("p",{children:n}),y&&!w?Object(o.jsx)("p",{children:"Mobile format is invalid!"}):"",E&&!I?Object(o.jsx)("p",{children:"Phone format is invalid!"}):"",O.map((function(e,t){return Object(o.jsxs)("form",{onSubmit:z,className:"update__form",children:[Object(o.jsx)("input",{onChange:function(e){return p(e.target.value)},defaultValue:e.name,placeholder:"Update name",type:"text"}),Object(o.jsx)("input",{onChange:function(e){return S(e.target.value)},defaultValue:e.surname,placeholder:"Update surname",type:"text"}),Object(o.jsx)("input",{onChange:function(e){return N(e.target.value)},defaultValue:e.email,placeholder:"update email",type:"email"}),Object(o.jsxs)("div",{className:"subform__mobile",children:[Object(o.jsx)("label",{children:"Mobile format: 09x xxx(x) xxx"}),Object(o.jsx)("input",{onChange:function(e){return P(e.target.value)},defaultValue:e.mobile,type:"tel",placeholder:"Enter mobile",maxLength:"12"})]}),Object(o.jsxs)("div",{className:"subform__phone",children:[Object(o.jsx)("label",{children:"Phone format: 0(xx) xxx(x) xxx"}),Object(o.jsx)("input",{onChange:function(e){return k(e.target.value)},defaultValue:e.phone,type:"tel",placeholder:"Enter phone",maxLength:"12"})]}),Object(o.jsx)("button",{disabled:!w||!I,children:"Update contact"})]},t)}))]})}n(99);function J(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){return v.a.get("https://contacts-d9f0b-default-rtdb.europe-west1.firebasedatabase.app/contacts.json").then((function(e){var t=N(e).filter((function(e){return!0===e.favorite}));a(t)})).catch((function(e){return console.log(e)}))}),[a]),Object(o.jsxs)("div",{className:"favorites__container",children:[Object(o.jsx)(j,{children:Object(o.jsx)(i.b,{to:"/contacts",className:"favorites__link home",children:"contacts"})}),Object(o.jsx)("table",{className:"favorites__table",children:Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Name"}),Object(o.jsx)("th",{children:"Surname"}),Object(o.jsx)("th",{children:"Email"})]}),n.map((function(e,t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.name})}),Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.surname})}),Object(o.jsx)("td",{children:Object(o.jsx)(i.b,{to:"/details/".concat(e.id),onClick:function(){return y(e.id)},children:e.email})})]},t)}))]})})]})}var U=n(38);function A(e){var t=e.component,n=Object(U.a)(e,["component"]),a=Object(h.f)();return Object(c.useEffect)((function(){return d.onAuthStateChanged((function(e){e?a.push("/"):a.push("/home")}))}),[a]),Object(o.jsx)(h.a,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return d.currentUser&&Object(o.jsx)(t,Object(C.a)({},e))}}))}var L=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(i.a,{children:Object(o.jsxs)(h.c,{children:[Object(o.jsx)(A,{exact:!0,path:"/",component:k}),Object(o.jsx)(A,{path:"/contacts",component:z}),Object(o.jsx)(A,{path:"/details/:id",component:q}),Object(o.jsx)(A,{path:"/update",component:D}),Object(o.jsx)(A,{path:"/favorites",component:J}),Object(o.jsx)(h.a,{path:"/home",component:l}),Object(o.jsx)(h.a,{path:"/login",component:f}),Object(o.jsx)(h.a,{path:"/signup",component:S})]})})})};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(p,{children:Object(o.jsx)(L,{})})}),document.getElementById("root"))},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},52:function(e,t,n){},73:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.49ca3b4b.chunk.js.map